var e=Object.defineProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,n,t)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,l=(e,l)=>{for(var i in l||(l={}))n.call(l,i)&&o(e,i,l[i]);if(a)for(var i of a(l))t.call(l,i)&&o(e,i,l[i]);return e};import{r as i,o as s,c as r,w as c,a as u,T as d,K as g,b as p,d as m,l as h,V as y,e as f,f as v,g as w,F as S,h as C,i as b,u as k,j as I,k as P,t as x,m as T,n as L,p as M,q as _,s as A,v as U,x as z,y as V,z as D,A as N,B as O,C as R,D as $,E,G as j,H as q,I as G,J as B,L as Y,N as F,M as Q,O as H,P as J,Q as K}from"./vendor.ea715d44.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();var Z=(e,a)=>{for(const[n,t]of a)e[n]=t;return e};var W=Z({},[["render",function(e,a){const n=i("router-view");return s(),r(n,null,{default:c((({Component:e})=>[u(d,null,{default:c((()=>[(s(),r(g,null,[(s(),r(p(e)))],1024))])),_:2},1024)])),_:1})}]]);const X=m.create({baseURL:"/musicApi",transformRequest:[function(e){return h.stringify(e)}],timeout:3e3}),ee=e=>X({method:"GET",url:`/song/url?id=${e.id}&br=${e.br}`}),ae=e=>X({method:"GET",url:`/song/detail?ids=${e.id}`});var ne={state:{playMethods:"loop",allSongs:[],currentSong:{songId:86849,songInfo:{al:null,ar:null},currentPlayTime:null,duration:null,playStatus:null,playIcon:"play-circle-o"},MediaDOM:null,searchSongs:"Wait for you"},getters:{GETsongId:function(e){return e.currentSong.songId},GETsongInfo:function(e){return e.currentSong.songInfo},GETallSongs:function(e){return e.allSongs},GETcurrentPlayTime:function(e){return e.currentSong.currentPlayTime},GETmediaDOM:function(e){return e.MediaDOM},GETplayStatus:function(e){return console.log("get",e.currentSong.playStatus),e.currentSong.playStatus},GETsearchSongs:function(e){return e.searchSongs},GETplayMethods:function(e){return e.playMethods}},mutations:{ACTsaveSongId:function(e,a){e.currentSong.songId=a.mid},ACTgetSongInfo:function(e,a){},ACTchangeSongInfo:function(e,a){console.log(a),e.currentSong.songInfo=a},ACTaddToAllSongs:function(e,a){a.forEach((a=>e.allSongs.push(a)));let n=new Map;for(let o of e.allSongs)n.has(o.id)||n.set(o.id,o);console.log(n),e.allSongs=[...n.values()];let t=e.allSongs.filter(((a,n)=>(a.id===e.currentSong.songId?a.isCurrentPlay=!0:a.isCurrentPlay=!1,a)));e.allSongs=t},MUTchangeCurrentTime:function(e,a){e.currentSong.currentPlayTime=a},MUTchangeDuration:function(e,a){e.currentSong.duration=a},MUTputMediaDom:function(e,a){e.MediaDOM=a,e.currentSong.playStatus=!a.paused,a.paused?e.currentSong.playIcon="play-circle-o":e.currentSong.playIcon="pause-circle-o"},MUTsavePlayStatus:function(e,a){console.log("set",a),e.currentSong.playStatus=a},MUTsavePlayIcon:function(e,a){e.currentSong.playIcon=a},MUTsaveSearchSongs:function(e,a){e.searchSongs=a},MUTsetPlayMethod:function(e,a){e.playMethods=a}},actions:{ACTaddSongInfo:async function(e,a){e.state.currentSong.songInfo=null;const n=e.getters.GETsongId;if(null!==n){const a=await ae({id:n}),t=await ee({id:n,br:32e4}),o=a.data.songs.map(((e,a,n)=>{const o=t.data.data.find((a=>a.id==e.id));return l(l({},e),o)}));e.commit("ACTchangeSongInfo",o[0]),e.commit("ACTaddToAllSongs",o)}},ACTputDuration:async function(e,a){e.commit("MUTchangeDuration",a)},ACTChangeCurrentTime:async function(e,a){e.commit("MUTchangeCurrentTime",a)},ACTdoSearch:async function(e,a){e.commit("MUTsaveSearchSongs",a)}},namespaced:!0};const te=new y({storage:window.localStorage}),oe=f({state:{},getters:{},mutations:{},actions:{},modules:{music:ne},plugins:[v(),te.plugin]}),le=["src"];var ie=Z({setup:()=>({themeVars:{swipeIndicatorSize:"6px",swipeIndicatorMargin:"var('–van-padding-sm')",swipeIndicatorActiveOpacity:"1",swipeIndicatorInactiveOpacity:"",swipeIndicatorActiveBackgroundColor:"var('–van-primary-color')",swipeIndicatorInactiveBackgroundColor:"var('–van-border-color')"},images:["https://s3.music.126.net/mobile-new/img/hot_music_bg_2x.jpg?2bfefd3ba37eaffbd66b7d108b9de26a=","https://s3.music.126.net/mobile-new/img/hot_music_bg_2x.jpg?2bfefd3ba37eaffbd66b7d108b9de26a="]})},[["render",function(e,a,n,t,o,l){const d=i("van-swipe-item"),g=i("van-swipe"),p=i("van-config-provider"),m=i("van-grid-item"),h=i("van-grid");return s(),w(S,null,[u(p,{"theme-vars":t.themeVars},{default:c((()=>[u(g,{autoplay:3e3,"lazy-render":"",style:{"border-radius":"18px",height:"200px",margin:"10px 14px"}},{default:c((()=>[(s(!0),w(S,null,C(t.images,(e=>(s(),r(d,{key:e},{default:c((()=>[b("img",{style:{width:"100%",height:"200px"},src:e},null,8,le)])),_:2},1024)))),128))])),_:1})])),_:1},8,["theme-vars"]),u(h,{style:{},gutter:6,"column-num":4,square:""},{default:c((()=>[u(m,{icon:"photo-o",text:"每日推荐"}),u(m,{icon:"photo-o",text:"私人FM"}),u(m,{icon:"photo-o",text:"歌单"}),u(m,{icon:"photo-o",text:"排行榜"})])),_:1})],64)}]]);var se=Z({setup(){k(),I();return{indexActive:P(0),indexTabbar:[{name:"发现",href:"/explore",iconName:"eye-o"},{name:"搜索",href:"/search",iconName:"search"},{name:"热门",href:"/hot",iconName:"hot-o"},{name:"我的",href:"/me",iconName:"user-o"}],indexOnChange:e=>T(`标签 ${e}`)}}},[["render",function(e,a,n,t,o,l){const u=i("van-tabbar-item"),d=i("van-tabbar");return s(),r(d,{modelValue:t.indexActive,"onUpdate:modelValue":a[0]||(a[0]=e=>t.indexActive=e),onChange:t.indexOnChange,"active-color":"#ee0a24","inactive-color":"#000",route:""},{default:c((()=>[(s(!0),w(S,null,C(t.indexTabbar,(e=>(s(),r(u,{icon:e.iconName,replace:"",to:e.href},{default:c((()=>[b("span",null,x(e.name),1)])),_:2},1032,["icon","to"])))),256))])),_:1},8,["modelValue","onChange"])}],["__scopeId","data-v-82e1df02"]]);function re(e,a){let n=_;return"string"==typeof e&&e.length>0&&(n=M(e).mapState),function(e,a){const n=k(),t=a(e),o={};return Object.keys(t).forEach((e=>{const a=t[e].bind({$store:n});o[e]=L(a)})),o}(a,n)}const ce={class:"music-player"},ue=["src"],de=["textContent"],ge=["innerHTML"];var pe=Z({setup(e,a){const n=k(),t=re("music",["currentSong"]);I();const o=A(re("music",["MediaDOM"])),l=A(t),i=L((()=>l.currentSong.playStatus)),s=L((()=>l.currentSong.playIcon)),r=P(!1),c=re("music",["allSongs"]),u=A(c),d=P(null),g=U("hideAll"),p=()=>{o.MediaDOM&&(o.MediaDOM.play(),i.value=!0,s.value="pause-circle-o",n.commit("music/MUTsavePlayIcon","pause-circle-o"),n.commit("music/MUTsavePlayStatus",!0))},m=()=>{o.MediaDOM&&(o.MediaDOM.pause(),i.value=!1,s.value="play-circle-o",n.commit("music/MUTsavePlayIcon","play-circle-o"),n.commit("music/MUTsavePlayStatus",!1))};return z((()=>{})),V((()=>{})),{statePlayList:c,player:l,audioMedia:o,play:p,pause:m,isPlayed:i,togglePlay:()=>{i.value?m():p()},playIcon:s,songDetailInfo:()=>`<div>-${null==l.currentSong.songInfo.ar?"无":l.currentSong.songInfo.ar.map((e=>e.name))}-${null==l.currentSong.songInfo.al?"无":l.currentSong.songInfo.al.name}</div>`,onTimeupdate:e=>{n.dispatch("music/ACTChangeCurrentTime",e.target.currentTime)},toPlayer:()=>{g()},togglePlayList:()=>{r.value=!0},playListShow:r,playList:u,onClickPlayer:async e=>{n.commit("music/ACTsaveSongId",{mid:e}),await n.dispatch("music/ACTaddSongInfo")},cellGroup:d}}},[["render",function(e,a,n,t,o,l){const d=i("van-icon"),g=i("van-cell"),p=i("van-cell-group"),m=i("van-sticky"),h=i("van-popup");return s(),w("div",ce,[t.player.currentSong.songInfo?(s(),w("div",{key:0,style:{width:"60%",display:"flex","flex-direction":"row","align-items":"center"},onClick:a[0]||(a[0]=e=>t.toPlayer())},[t.player.currentSong.songInfo.al?(s(),w("img",{key:0,class:D({stopRotate:!t.isPlayed,startRotate:t.isPlayed}),src:t.player.currentSong.songInfo.al.picUrl,width:"35",height:"35",style:{"border-radius":"35px",border:"4px solid black"},id:"pic"},null,10,ue)):N("",!0),t.player.currentSong.songInfo?(s(),w("span",{key:1,style:{"font-size":"14px","margin-left":"10px"},class:"van-ellipsis",textContent:x(t.player.currentSong.songInfo.name)},null,8,de)):N("",!0),b("span",{style:{"font-size":"10px",color:"#969799","margin-left":"10px"},class:"van-ellipsis",innerHTML:t.songDetailInfo()},null,8,ge)])):N("",!0),b("div",null,[u(d,{name:t.playIcon,onClick:a[1]||(a[1]=e=>t.togglePlay())},null,8,["name"]),u(d,{name:"bars",onClick:a[2]||(a[2]=e=>t.togglePlayList())})]),u(h,{show:t.playListShow,"onUpdate:show":a[3]||(a[3]=e=>t.playListShow=e),round:"",position:"bottom",style:{height:"400px",bottom:"42px"},ref:"cellGroup"},{"overlay-content":c((()=>[u(m,null,{default:c((()=>[u(p,null,{default:c((()=>[u(g,{center:"",title:"正在播放"})])),_:1})])),_:1})])),default:c((()=>[u(p,null,{default:c((()=>[(s(!0),w(S,null,C(t.playList.allSongs,(e=>(s(),r(g,{class:D([{active:e.isCurrentPlay},"song-cell"]),title:e.name,clickable:!0,onClick:a=>t.onClickPlayer(e.id),center:""},null,8,["class","title","onClick"])))),256))])),_:1})])),_:1},8,["show"])])}],["__scopeId","data-v-46ba176a"]]);function me(e){let a=parseInt(e),n=0,t="";return a>60&&(n=parseInt(a/60),a=parseInt(a%60),n>60&&(n=parseInt(n%60))),t=`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`,t}const he={components:{PlayerNav:pe},setup(){const e=O();I();const a=k(),n=P(null),t=re("music",["currentSong"]),o=re("music",["playMethods"]),l=A(o),i=A(t),s=P(!1),r=U("showingAll");U("hideAll");const c=P(null),u=L((()=>i.currentSong.playStatus)),d=P(null),g=L((()=>"loop"===l.playMethods?"danquxunhuan":"list"===l.playMethods?"liebiaoxunhuan":void 0)),p=L((()=>i.currentSong.playIcon)),m=re("music",["allSongs"]),h=A(m),y=L((()=>l.playMethods)),f=A({navBarBackgroundColor:"transparent",navBarIconColor:"white",navBarTextColor:"white",vanCellTitleFlex:"unset"}),v=L((()=>h.allSongs.map(((e,a,n)=>!0===e.isCurrentPlay&&(0===a?[n.length-1,1]:a===n.length-1?[n.length-2,0]:[a-1,a+1]))).filter((e=>!1!==e))[0])),w=async()=>{const e=v.value[1];a.commit("music/ACTsaveSongId",{mid:h.allSongs[e].id}),await a.dispatch("music/ACTaddSongInfo")},S=()=>{n.value&&(n.value.play(),u.value=!0,p.value="pause-circle-o",a.commit("music/MUTsavePlayIcon","pause-circle-o"),a.commit("music/MUTsavePlayStatus",!0))},C=()=>{n.value&&(n.value.pause(),u.value=!1,p.value="play-circle-o",a.commit("music/MUTsavePlayIcon","play-circle-o"),a.commit("music/MUTsavePlayStatus",!1))},b=e=>{n.value.currentTime=e},x=L((()=>!1));return R((()=>i.currentSong.currentPlayTime),(async(e,a)=>{(0===e||a>=i.currentSong.duration)&&("loop"===y.value?S():"list"===y.value&&(C(),await w()))})),z((async()=>{})),V((async()=>{})),$((async()=>{})),{player:i,route:e,songDetailInfo:()=>{if(null!=i.currentSong.songInfo)return`${null==i.currentSong.songInfo.ar?"无":i.currentSong.songInfo.ar.map((e=>e.name))}`},onClickLeft:()=>{r()},onClickRight:()=>{},toggleLastSong:async()=>{const e=v.value[0];a.commit("music/ACTsaveSongId",{mid:h.allSongs[e].id}),await a.dispatch("music/ACTaddSongInfo")},toggleNextSong:w,isPlayed:u,playIcon:p,togglePlay:()=>{n.value.paused?S():C()},formateSeconds:me,audioMedia:n,onTimeupdate:e=>{a.dispatch("music/ACTChangeCurrentTime",e.target.currentTime)},onLoadedmetadata:e=>{a.commit("music/MUTputMediaDom",n.value),a.dispatch("music/ACTputDuration",e.target.duration)},showPlayer:x,onCurrentTimeChange:async e=>{await a.dispatch("music/ACTChangeCurrentTime",e),b(e)},play:S,pause:C,themeVars:f,playListShow:s,playList:h,togglePlayList:()=>{s.value=!0},onClickPlayer:async e=>{a.commit("music/ACTsaveSongId",{mid:e}),await a.dispatch("music/ACTaddSongInfo")},container:c,togglePlayMethods:()=>{null!==n.value.getAttribute("loop")?(n.value.removeAttribute("loop"),a.commit("music/MUTsetPlayMethod","list"),T({message:"列表播放",icon:"like-o"})):(n.value.setAttribute("loop","loop"),a.commit("music/MUTsetPlayMethod","loop"),T({message:"单曲循环播放",icon:"like-o"}))},ended:()=>{console.log("这遍播完了")},methodsIcon:g,bgImg:d}}},ye={class:"bg-main",style:{overflow:"hidden",height:"100%"}},fe={key:0,class:"blur"},ve=["src"],we={key:0,style:{color:"white"}},Se=["textContent"],Ce={key:1,style:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center",height:"62%"}},be=["src"],ke=["src"],Ie=(e=>(q("data-v-72b29ed4"),e=e(),G(),e))((()=>b("div",{style:{"text-align":"center",height:"8%"}}," 功能栏 ",-1))),Pe={style:{display:"flex","flex-direction":"row",width:"100%","justify-content":"center","align-items":"center"},class:"player-area-timmer"},xe={style:{"font-size":"12px","margin-left":"15px"}},Te={style:{width:"60%","text-align":"center",margin:"0 auto",height:"8%"}},Le={style:{"font-size":"12px","margin-right":"15px"}},Me={style:{display:"flex","flex-direction":"row","justify-content":"space-around","align-items":"center",margin:"10px 0",color:"white",height:"12%"}};const _e={components:{Footer:se,PlayerNav:pe,Player:Z(he,[["render",function(e,a,n,t,o,l){const d=i("van-icon"),g=i("van-nav-bar"),p=i("van-slider"),m=i("van-cell"),h=i("van-cell-group"),y=i("van-popup"),f=i("van-config-provider");return E((s(),w("div",ye,[u(f,{style:{height:"100%"},"theme-vars":t.themeVars},{default:c((()=>[t.player.currentSong.songInfo?(s(),w("div",fe,[t.player.currentSong.songInfo.al?(s(),w("img",{key:0,id:"bg-img",src:t.player.currentSong.songInfo.al.picUrl,ref:"bgImg"},null,8,ve)):N("",!0)])):N("",!0),u(g,{border:!1,"left-arrow":"",onClickLeft:t.onClickLeft,onClickRight:t.onClickRight,style:{height:"8%"}},{title:c((()=>[t.player.currentSong.songInfo?(s(),w("span",we,x(t.player.currentSong.songInfo.name),1)):N("",!0),b("div",{style:{color:"white"},textContent:x(t.songDetailInfo())},null,8,Se)])),left:c((()=>[u(d,{name:"arrow-down",size:"18"})])),right:c((()=>[u(d,{name:"search",size:"18"})])),_:1},8,["onClickLeft","onClickRight"]),t.player.currentSong.songInfo?(s(),w("div",Ce,[t.player.currentSong.songInfo?(s(),w("audio",{key:0,ref:"audioMedia",src:t.player.currentSong.songInfo.url,onTimeupdate:a[0]||(a[0]=(...e)=>t.onTimeupdate&&t.onTimeupdate(...e)),onLoadedmetadata:a[1]||(a[1]=(...e)=>t.onLoadedmetadata&&t.onLoadedmetadata(...e)),loop:"loop"},null,40,be)):N("",!0),t.player.currentSong.songInfo.al?(s(),w("img",{key:1,src:t.player.currentSong.songInfo.al.picUrl,id:"mainPic",class:D({pic:!0,stopRotate:!t.isPlayed,startRotate:t.isPlayed})},null,10,ke)):N("",!0)])):N("",!0),Ie,b("div",Pe,[b("a",xe,x(t.formateSeconds(t.player.currentSong.currentPlayTime)),1),b("div",Te,[u(p,{"active-color":"#ee0a24",style:{},modelValue:t.player.currentSong.currentPlayTime,"onUpdate:modelValue":a[2]||(a[2]=e=>t.player.currentSong.currentPlayTime=e),onChange:t.onCurrentTimeChange,onDragStart:t.pause,onDragEnd:t.play,max:t.player.currentSong.duration},null,8,["modelValue","onChange","onDragStart","onDragEnd","max"])]),b("a",Le,x(t.formateSeconds(t.player.currentSong.duration)),1)]),b("div",Me,[u(d,{onClick:a[3]||(a[3]=e=>t.togglePlayMethods()),class:"iconfont","class-prefix":"my-icon",name:t.methodsIcon,size:"35"},null,8,["name"]),u(d,{onClick:a[4]||(a[4]=e=>t.toggleLastSong()),name:"arrow-left",size:"35"}),u(d,{onClick:a[5]||(a[5]=e=>t.togglePlay()),name:t.playIcon,size:"60"},null,8,["name"]),u(d,{onClick:a[6]||(a[6]=e=>t.toggleNextSong()),name:"arrow",size:"35"}),u(d,{name:"bars",onClick:a[7]||(a[7]=e=>t.togglePlayList()),size:"35"})]),u(y,{show:t.playListShow,"onUpdate:show":a[8]||(a[8]=e=>t.playListShow=e),round:"",position:"bottom",style:{height:"400px"}},{default:c((()=>[u(h,null,{default:c((()=>[(s(!0),w(S,null,C(t.playList.allSongs,(e=>(s(),r(m,{class:D([{active:e.isCurrentPlay},"song-cell"]),title:e.name,clickable:!0,onClick:a=>t.onClickPlayer(e.id),center:""},null,8,["class","title","onClick"])))),256))])),_:1})])),_:1},8,["show"])])),_:1},8,["theme-vars"])],512)),[[j,t.showPlayer]])}],["__scopeId","data-v-72b29ed4"]])},setup(e,a){k();const n=I(),t=O(),o=P(null),l=P(0),i=P(0),s=P(!1),r=P(!1),c=P(!0),u=P(!0),d=P(!0),g=()=>{d.value=!0},p=()=>{d.value=!1},m=()=>{u.value=!0},h=()=>{c.value=!1};return z((()=>{})),B("hideNav",(()=>{u.value=!1})),B("showNav",m),B("hidePlayer",p),B("showPlayer",g),B("hideAll",h),B("showingAll",(()=>{c.value=!0})),{showPopup:()=>{s.value=!0},onRefresh:()=>{setTimeout((()=>{T("刷新成功"),r.value=!1,i.value++}),1e3)},indexOnChange:e=>T(`标签 ${e}`),showNavStatus:u,show:s,freshCount:i,loading:r,indexActive:l,route:t,showNav:m,showPlayerStatus:d,showPlayer:g,hidePlayer:p,toSearchPage:()=>{n.push("/search")},watchInputValue:()=>{console.log(searchVal.value)},getChildList:o,hideAll:h,showAll:c}}},Ae={style:{height:"100%"}},Ue={style:{height:"100%"}},ze={style:{display:"flex","justify-content":"space-around","align-items":"center",background:"white"}},Ve=Y(" content ");var De=Z(_e,[["render",function(e,a,n,t,o,l){const r=i("van-icon"),d=i("van-search"),g=i("van-sticky"),p=i("router-view"),m=i("van-divider"),h=i("van-popup"),y=i("PlayerNav"),f=i("Footer"),v=i("Player");return s(),w("div",Ae,[E(b("div",Ue,[u(g,null,{default:c((()=>[E(b("div",ze,[u(r,{"is-link":"",onClick:t.showPopup,name:"wap-nav",size:"30"},null,8,["onClick"]),u(d,{style:{width:"80%"},placeholder:"请输入搜索关键词","input-align":"center",shape:"round",onClickInput:t.toSearchPage},null,8,["onClickInput"])],512),[[j,t.showNavStatus,"showNav",{sync:!0}]])])),_:1}),u(p,{class:"content"}),u(m),u(h,{show:t.show,"onUpdate:show":a[0]||(a[0]=e=>t.show=e),position:"left",style:{height:"100%",width:"60%"}},{default:c((()=>[Ve])),_:1},8,["show"]),b("div",{class:D(["bottom",{"hide-player":!t.showPlayerStatus}])},[E(u(y,{class:D({"hide-bottom":!t.showNavStatus})},null,8,["class"]),[[j,t.showPlayerStatus,"showPlayer",{sync:!0}]]),E(u(f,null,null,512),[[j,t.showNavStatus,"showNav",{sync:!0}]])],2)],512),[[j,t.showAll]]),E(u(v,null,null,512),[[j,!t.showAll]])])}]]);const Ne=()=>X({method:"get",url:`/login/status?timerstamp=${Date.now()}`,withCredentials:!0}),Oe={setup(){const e=I(),a=P(""),n=P("");return{username:a,password:n,onSubmit:e=>{var t;T.loading({message:"加载中...",forbidClick:!0}),(t={phone:a.value,password:n.value},X({method:"get",url:`/login/cellphone?phone=${t.phone}&password=${t.password}`})).then((e=>{console.log(e),400==e.data.code?(T.clear(),F({type:"danger",message:"密码错误，登录失败"})):200==e.data.code&&F({type:"success",message:"登录成功"})})).catch((e=>{console.log(e)})),console.log("submit",e)},onClickLeft:()=>e.push("/me"),onClickRight:()=>e.push("/QrcodeLoginPage"),toYZMlogin:()=>{e.push("/YzmLoginPage")}}}},Re={style:{margin:"16px"}},$e=Y("使用验证码登录"),Ee={style:{margin:"16px"}},je=Y(" 提交 ");var qe=Z(Oe,[["render",function(e,a,n,t,o,l){const r=i("van-nav-bar"),d=i("van-field"),g=i("van-cell-group"),p=i("van-button"),m=i("van-form");return s(),w(S,null,[u(r,{title:"手机号登录","left-text":"返回","right-text":"二维码登录","left-arrow":"",onClickLeft:t.onClickLeft,onClickRight:t.onClickRight},null,8,["onClickLeft","onClickRight"]),u(m,{onSubmit:t.onSubmit},{default:c((()=>[u(g,{inset:""},{default:c((()=>[u(d,{modelValue:t.username,"onUpdate:modelValue":a[0]||(a[0]=e=>t.username=e),name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"]),u(d,{modelValue:t.password,"onUpdate:modelValue":a[1]||(a[1]=e=>t.password=e),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])])),_:1}),b("div",Re,[u(p,{type:"success",block:"",onClick:a[2]||(a[2]=e=>t.toYZMlogin())},{default:c((()=>[$e])),_:1})]),b("div",Ee,[u(p,{round:"",block:"",type:"primary","native-type":"submit"},{default:c((()=>[je])),_:1})])])),_:1},8,["onSubmit"])],64)}]]);const Ge={setup(){const e=I(),a=P(null),n=P(null),t=P(!0),o=P(!0);return R(a,((e,a)=>{console.log(e,a),/^1[3456789]\d{9}$/.test(e)?t.value=!1:t.value=!0})),R(n,((e,a)=>{/^\d{4}$/.test(e)&&!t.value?o.value=!1:o.value=!0})),{phone:a,yzm:n,loginDisabled:o,getYzmDisabled:t,onSubmit:async()=>{var t;await(t={phone:a.value,captcha:n.value},X({method:"get",url:`/login/cellphone?phone=${t.phone}&captcha=${t.captcha}`})).then((a=>{console.log(a),200===a.data.code&&(F({type:"success",message:"登录成功"}),e.push("/me"))}))},getYzm:async()=>{var e;await(e={phone:a.value},X({method:"get",url:`/captcha/sent?phone=${e.phone}`})).then((e=>{console.log(e)}))},onClickLeft:()=>{e.push("/me")},onClickRight:()=>{e.push("/QrcodeLoginPage")}}}},Be=Y("发送验证码"),Ye={style:{margin:"16px"}},Fe=Y(" 提交 ");var Qe=Z(Ge,[["render",function(e,a,n,t,o,l){const r=i("van-nav-bar"),d=i("van-field"),g=i("van-cell-group"),p=i("van-button"),m=i("van-form");return s(),w(S,null,[u(r,{title:"手机号登录","left-text":"返回","right-text":"二维码登录","left-arrow":"",onClickLeft:t.onClickLeft,onClickRight:t.onClickRight},null,8,["onClickLeft","onClickRight"]),u(m,{onSubmit:t.onSubmit},{default:c((()=>[u(g,{inset:""},{default:c((()=>[u(d,{modelValue:t.phone,"onUpdate:modelValue":a[0]||(a[0]=e=>t.phone=e),name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"])])),_:1}),u(g,{inset:""},{default:c((()=>[u(d,{modelValue:t.yzm,"onUpdate:modelValue":a[1]||(a[1]=e=>t.yzm=e),center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},{button:c((()=>[u(p,{onClick:t.getYzm,size:"small",type:"primary",disabled:t.getYzmDisabled},{default:c((()=>[Be])),_:1},8,["onClick","disabled"])])),_:1},8,["modelValue"])])),_:1}),b("div",Ye,[u(p,{round:"",block:"",type:"primary","native-type":"submit",disabled:t.loginDisabled},{default:c((()=>[Fe])),_:1},8,["disabled"])])])),_:1},8,["onSubmit"])],64)}]]);const He={id:"qrImg",ref:"qrImg"},Je={id:"info",class:"info",ref:"info"};var Ke=Z({setup(){const e=I(),a=P(null),n=P(null);async function t(){const e=await Ne();n.value.innerText=JSON.stringify(e.data,null,2)}async function o(e){return(await(e=>X({method:"get",withCredentials:!0,url:`/login/qr/check?key=${e}&timerstamp=${Date.now()}`}))(e)).data}async function l(){let e;await t();const n=(await X({method:"get",url:`/login/qr/key?timerstamp=${Date.now()}`,withCredentials:!0})).data.data.unikey,l=await(e=>X({method:"get",url:`/login/qr/create?key=${e}&qrimg=true&timerstamp=${Date.now()}`,withCredentials:!0}))(n);a.value.src=l.data.data.qrimg,e=setInterval((async()=>{const a=await o(n);800===a.code&&(alert("二维码已过期,请重新获取"),clearInterval(e)),803===a.code&&(clearInterval(e),alert("授权登录成功"),await t())}),3e3)}return z((()=>{l(),console.dir(a.value),console.log(n.value)})),{qrImg:a,info:n,onClickLeft:()=>{e.push("/me")},onClickRight:()=>{e.push("/PhoneLoginPage")}}}},[["render",function(e,a,n,t,o,l){const r=i("van-nav-bar");return s(),w("div",null,[u(r,{title:"二维码登录","left-text":"返回","right-text":"手机号登录","left-arrow":"",onClickLeft:t.onClickLeft,onClickRight:t.onClickRight},null,8,["onClickLeft","onClickRight"]),b("img",He,null,512),b("div",Je,null,512)])}]]);const Ze={setup(e,a){const n=I(),t=P(0),o=A([]),l=A([]);return V((async()=>{})),z((async()=>{const e=sessionStorage.getItem("userId");console.log(e);const a=await(n={uid:e},X({method:"get",url:`/user/playlist?uid=${n.uid}`}));var n;console.log(a),a.data.playlist.forEach(((e,a,n)=>{0!=e.subscribed?o.push(e):l.push(e)})),console.log(o,l)})),{active:t,subscribedList:o,unsubscribedList:l,toPlayList:async e=>{console.log(e),n.push({path:"/PlayList",query:{id:e}})}}}},We=Y("创建歌单"),Xe=["src"],ea={style:{display:"flex","flex-direction":"column",padding:"0 10px"}},aa={style:{}},na={class:"p-style"},ta=Y("收藏歌单"),oa=["src"],la={style:{display:"flex","flex-direction":"column",padding:"0 10px"}},ia={class:"van-ellipsis",style:{}},sa={class:"p-style"};const ra={components:{PhoneLoginPage:qe,EmailLoginPage:Qe,QrcodeLoginPage:Ke,MyPlayList:Z(Ze,[["render",function(e,a,n,t,o,l){const d=i("van-cell"),g=i("van-cell-group"),p=i("van-tab"),m=i("van-tabs");return s(),r(m,{style:{"z-index":"0"},active:t.active,"onUpdate:active":a[0]||(a[0]=e=>t.active=e),scrollspy:"",sticky:"",background:"white","offset-top":40},{default:c((()=>[u(p,{style:{"z-index":"0"},class:"list-box",title:"创建歌单"},{default:c((()=>[u(g,{inset:""},{default:c((()=>[u(d,null,{default:c((()=>[We])),_:1}),(s(!0),w(S,null,C(t.unsubscribedList,(e=>(s(),r(d,{clickable:"true",onClick:a=>t.toPlayList(e.id)},{title:c((()=>[b("img",{src:e.coverImgUrl,width:"60",height:"60",style:{float:"left"}},null,8,Xe),b("div",ea,[b("span",aa,x(e.name),1),b("p",na,x(e.trackCount)+"首",1)])])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1}),u(p,{class:"list-box",title:"收藏歌单"},{default:c((()=>[u(g,{inset:""},{default:c((()=>[u(d,null,{default:c((()=>[ta])),_:1}),(s(!0),w(S,null,C(t.subscribedList,(e=>(s(),r(d,{clickable:"true",onClick:a=>t.toPlayList(e.id)},{title:c((()=>[b("img",{src:e.coverImgUrl,width:"60",height:"60",style:{float:"left"}},null,8,oa),b("div",la,[b("span",ia,x(e.name),1),b("p",sa,x(e.trackCount)+"首",1)])])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1},8,["active"])}]])},setup(){const e=P(!0),a=I(),n=P(null),t=A({}),o=A({});z((async()=>{const a=await Ne();console.log(a.data.data),null===a.data.data.account&&null===a.data.data.profile?e.value=!0:(Object.assign(o,a.data.data.profile),Object.assign(t,a.data.data.account),sessionStorage.setItem("userId",a.data.data.account.id),e.value=!1)})),V((()=>{}));return{userAccount:t,profile:o,toLoginPage:()=>{a.push("/YzmLoginPage")},testLogout:async()=>{await X({method:"get",url:"/logout"}).then((e=>{console.log(e),200==e.data.code&&F({type:"success",message:"已退出登录"})}))},info:n,me_loading:e}}},ca={class:"main"},ua={class:"me"},da=["src"],ga={class:"me-r"},pa={style:{"font-size":"23px"}},ma={style:{"font-size":"16px"}},ha=b("div",null,null,-1),ya=Y(" 登录 "),fa=Y(" 退出登录（测试） "),va={ref:"info",style:{"font-size":"12px"}};const wa={style:{color:"white"}},Sa={class:"blur"},Ca=["src"],ba={class:"playlist-title"},ka={class:"playlist-title-coverpic"},Ia=["src"],Pa={class:"playlist-title-details"},xa={style:{color:"white","font-size":"16px"}},Ta={key:0,style:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center",position:"relative"}},La=["src"],Ma=["src"],_a={key:2,style:{color:"white","font-size":"16px","margin-left":"5px"}};const Aa=[{mode:"history",path:"/",name:"Home",component:De,redirect:e=>"/explore",children:[{path:"/explore",name:"Explore",component:ie},{path:"/me",name:"Me",component:Z(ra,[["render",function(e,a,n,t,o,l){const r=i("van-cell"),d=i("lazy-component"),g=i("van-skeleton"),p=i("van-button"),m=i("MyPlayList");return s(),w("div",ca,[u(g,{title:"",avatar:"",row:4,loading:t.me_loading,style:{"background-color":"white"}},{default:c((()=>[u(d,null,{default:c((()=>[u(r,{"is-link":"",size:"large",style:{display:"flex","flex-direction":"row","align-items":"center"}},{title:c((()=>[b("div",ua,[b("div",null,[b("img",{src:t.profile.avatarUrl,width:"80",height:"80",class:"avatar"},null,8,da)]),b("div",ga,[b("b",pa,x(t.profile.nickname),1),b("a",ma,x(t.profile.signature),1)]),ha])])),_:1})])),_:1})])),_:1},8,["loading"]),u(p,{onClick:a[0]||(a[0]=e=>t.toLoginPage()),color:"linear-gradient(to right, #ff6034, #ee0a24)",block:"",style:{"line-height":"80px"}},{default:c((()=>[ya])),_:1}),u(p,{style:{"line-height":"80px"},onClick:a[1]||(a[1]=e=>t.testLogout()),block:""},{default:c((()=>[fa])),_:1}),b("p",va,null,512),u(m)])}]])},{path:"/search",name:"Search",component:Z({setup(e,a){const n=k(),t=P([]),o=P(!1),l=P(!1),i=P(""),s=I(),r=async()=>{if(""===i.value)o.value=!1,l.value=!0;else{const a=await(e=i.value,X({method:"GET",url:`/search?keywords=${e}`}));console.log(a.data.result.songs),t.value=a.data.result.songs,o.value=!1,l.value=!0}var e},c=P([]);let u=U("showNav"),d=U("hideNav");z((()=>{d()})),$((()=>{u()}));return{songs:c,list:t,onLoad:r,loading:o,finished:l,doSearch:async()=>{await n.dispatch("music/ACTdoSearch",i.value),await r()},watchInputValue:()=>{console.log(i.value)},searchVal:i,onCancel:()=>{T("取消"),console.log(s),s.push("/me")},onClickPlayer:async e=>{n.commit("music/ACTsaveSongId",{mid:e}),await n.dispatch("music/ACTaddSongInfo")}}}},[["render",function(e,a,n,t,o,l){const d=i("van-search"),g=i("van-cell"),p=i("van-list");return s(),w("div",null,[u(d,{style:{width:"100%"},modelValue:t.searchVal,"onUpdate:modelValue":[a[0]||(a[0]=e=>t.searchVal=e),t.watchInputValue],placeholder:"请输入搜索关键词","input-align":"center",shape:"round","show-action":"",autofocus:!0,onBlur:a[1]||(a[1]=e=>t.doSearch()),onCancel:t.onCancel},null,8,["modelValue","onUpdate:modelValue","onCancel"]),u(p,{loading:t.loading,"onUpdate:loading":a[2]||(a[2]=e=>t.loading=e),finished:t.finished,"finished-text":"没有更多了",onLoad:t.onLoad},{default:c((()=>[(s(!0),w(S,null,C(t.list,(e=>(s(),r(g,{onClick:a=>t.onClickPlayer(e.id),key:e.id,title:e.name},null,8,["onClick","title"])))),128))])),_:1},8,["loading","finished","onLoad"])])}]])},{path:"/hot",name:"Hot",component:Z({components:{}},[["render",function(e,a,n,t,o,l){return s(),w("div")}]])},{path:"/PlayList",name:"PlayList",component:Z({setup(e,a){const n=k(),t=A({data:null}),o=I(),l=A({data:null}),i=A({}),s=A({data:null}),r=A({navBarBackgroundColor:"transparent",navBarIconColor:"white",navBarTextColor:"white",vanCellTitleFlex:"unset"}),c=async()=>{let e=u.query.id,a=await(n={id:e},X({method:"GET",url:`/playlist/detail?id=${n.id}`}));var n;if(Object.assign(i,a.data.playlist),null!==a.data.privileges){let e=a.data.privileges.map((e=>e.id));const n=await ee({id:e.toString(),br:32e4}),o=await ae({id:e.toString()});s.data=o.data.songs,t.data=n.data.data;const i=t.data.map((e=>({id:e.id,url:e.url})));l.data=i}};let u=O(),d=U("showNav"),g=U("hideNav");return z((async()=>{g(),await c()})),V((async()=>{g(),await c()})),$((async()=>{d()})),{songsInfo:t,songsInPlayList:l,playListInfo:i,themeVars:r,songs:s,onClickPlayer:async e=>{n.commit("music/ACTsaveSongId",{mid:e}),await n.dispatch("music/ACTaddSongInfo")},onClickLeft:()=>{o.push("/me")},onClickRight:()=>{console.dir("还没写")},watchSrcoll:e=>{r.navBarBackgroundColor=e>=130?"black":"transparent"}}}},[["render",function(e,a,n,t,o,l){const d=i("van-icon"),g=i("van-nav-bar"),p=i("van-sticky"),m=i("van-cell"),h=i("van-config-provider");return s(),w("div",null,[u(h,{"theme-vars":t.themeVars},{default:c((()=>[u(p,{onScroll:a[0]||(a[0]=({scrollTop:e})=>t.watchSrcoll(e))},{default:c((()=>[u(g,{"left-arrow":"",border:!1,fixed:!0,onClickLeft:t.onClickLeft,onClickRight:t.onClickRight},{title:c((()=>[b("b",wa,x(t.playListInfo.name),1)])),right:c((()=>[u(d,{name:"search",size:"18"})])),_:1},8,["onClickLeft","onClickRight"])])),_:1}),b("div",Sa,[b("img",{src:t.playListInfo.coverImgUrl,style:{width:"100%",height:"auto"}},null,8,Ca)]),b("div",ba,[b("div",ka,[b("img",{src:t.playListInfo.coverImgUrl,width:"100",height:"100"},null,8,Ia)]),b("div",Pa,[b("a",xa,x(t.playListInfo.name),1),t.playListInfo.creator?(s(),w("span",Ta,[t.playListInfo.creator.avatarDetail?(s(),w("img",{key:0,class:"identityIcon",src:t.playListInfo.creator.avatarDetail.identityIconUrl,width:"10",height:"10"},null,8,La)):N("",!0),t.playListInfo.creator?(s(),w("img",{key:1,src:t.playListInfo.creator.avatarUrl,width:"30",height:"30",style:{"border-radius":"30px"}},null,8,Ma)):N("",!0),t.playListInfo.creator?(s(),w("a",_a,x(t.playListInfo.creator.nickname),1)):N("",!0)])):N("",!0)])]),b("div",null,[(s(!0),w(S,null,C(t.songs.data,(e=>(s(),r(m,{class:"song-cell",center:"",title:e.name,onClick:a=>t.onClickPlayer(e.id),clickable:"true"},{label:c((()=>[Y(x(e.ar.map((e=>e.name)).join("/"))+"-"+x(e.al.name),1)])),_:2},1032,["title","onClick"])))),256))])])),_:1},8,["theme-vars"])])}]])}]},{path:"/PhoneLoginPage",name:"PhoneLoginPage",component:qe},{path:"/YzmLoginPage",name:"YzmLoginPage",component:Qe},{path:"/QrcodeLoginPage",name:"QrcodeLoginPage",component:Ke}],Ua=Q({history:H(),routes:Aa,scrollBehavior:(e,a,n)=>n&&e.meta.keepAlive?n:{x:0,y:0}});J(W).use(K).use(oe).use(Ua).mount("#app");
